const db = require('../../dbConfig.js');
const videogamesModel = require('../videogamesModel.js');

// jest global(s) - before and after each, or before and after all
afterAll(async () => {
  await db('videogames').truncate();
});

/* Testsuite: videogamesModel
    - Testset: add/get/edit/get/remove the videogame
      - Testcase: add videogame
      - Testcase: get videogame that was just added
      - Testcase: edit videogame name
      - Testcase: get videogame that was just edited
      - Testcase: remove the videogame from database
    - Testset: add3/getAll the 3 videogames

*/

// Testsuite
describe('videogames model', () => {
  // Testset
  describe('Testset: add/get/edit/get/remove the videogame', () => {
    // Testcase
    it('add videogame', async () => {
      // Setup
      let firstVideogame = {
        name: 'Chronno Trigger',
        platform: 'snes',
        completed: 0
      };

      // Action(s)
      await videogamesModel.insert(firstVideogame);

      // Result(s)
      const videogamesQuery = await db('videogames').where(
        'name',
        'Chronno Trigger'
      );
      expect(videogamesQuery[0].name).toBe(firstVideogame.name);
    });
  });
});
